<!--ユーザー側投稿一覧-->
<div class="container">
  <h2 class="mt-3 mb-4">投稿一覧</h2>

  <!--タグ検索-->
  <div class="row">
    <div class="col-2 mb-5">
    <%= form_tag trips_path, method: :get, class: 'boards__searchForm' do %>
      <%= select_tag :tag_id,
                     options_from_collection_for_select(Tag.all, :id, :name, params[:tag_id]),
                     {
                       prompt: 'タグで絞り込み検索',
                       onchange: 'submit(this.form);'
                     }
      %>
    <% end %>
    </div>

    <!--検索フォーム-->
  <div class="col">
    <%= form_with url: search_path, method: :get, local: true do |f| %>
      <%= f.text_field :keyword, value: @keyword %>
      <%= f.submit "検索" %>
    <% end %>
   </div>
  </div>

  <!--投稿繰り返し処理-->
  <div class="row">
    <% @trips.each do |trip| %>
  <div class="col-6">
    <%= link_to trip_path(trip.id) do %>
      <%= image_tag trip.image, size: "550x300" %>
    <% end %>
    　<p><%= trip.user.name %></p>
      <p><%= trip.title %></p>
      <p><%= trip.body %></p>
      
      <!--星平均-->
  <script>
    raty(document.getElementById('star'), {
      size     : 36,
      starOff:  '<%= asset_path('star-off.png') %>',
      starOn : '<%= asset_path('star-on.png') %>',
      starHalf: '<%= asset_path('star-half.png') %>',
      scoreName: '<%#= trip.average(:star).to_f.round(1) %>',
      half: true
    });
  </script>
  
  <!--コメント-->
      <p>コメント数：<%= trip.trip_comments.count %></p>
      </div>
    <% end %>
  </div>
</div>